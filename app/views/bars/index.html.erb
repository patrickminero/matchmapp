
<div class="container" data-controller="map-toggler">
  <%= link_to '< Go back', matches_path(session[:match_id]), class: 'btn btn-outline-primary mx-3' %>
  <div class="text-center mt-3">
    <button data-action="click->map-toggler#toggle" class="btn btn-primary">View list</button>
  </div>
  
  <div class="row">

    
    <div class="col-12 col-md-6 d-none" data-map-toggler-target="barView">
      <% @bars.each do |bar| %>
        <%= link_to bar_path(bar) do %>
          <div class="card-product my-2">
            <%= cl_image_tag( bar.photos.first.key ) %>
            <div class="card-product-infos">
              <h2><%= bar.name  %></h2>
              <p><%= bar.description  %></p>
              <p><%= bar.status  %></p>
              <span><%= bar.category  %></span>
            </div>  
          </div>
        <% end %>
      <% end %>
    </div>

    <div class="col-12 col-md-6 rounded" data-map-toggler-target="mapView">
      <div data-controller="show-map" class="my-3" >
        
        <div id="map" data-target="show-map.map"
          style="width: 100%; height: 600px;"
          <% @bars.each do |bar| %>
          <% @marker = {lng: bar.longitude, lat: bar.latitude} %>
          data-marker="<%= @marker.to_json %>"
          <% end %>
          data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>">
        </div>
      </div> 
    </div>
  </div>
</div>